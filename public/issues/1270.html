<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta content="text/html;charset=UTF-8" http-equiv="Content-Type" />
    <meta
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
      name="viewport"
    />
    <title>
      Feature request #1270: Always redirect from rails subdomain to
      typechecked.net &middot; typechecked.net
    </title>
    <link
      rel="stylesheet"
      media="screen"
      href="/assets/application-73fd7b8197d0b27a25f03f916460e23c.css"
    />
  </head>
  <body>
    <div class="viewport menu-closed">
      <div class="app">
        <a id="top" name="top"></a>
        <nav class="global">
          <a class="menu-icon" href="#">&equiv;</a>
          <h1><a href="/">Wincent</a></h1>
          <ul class="navbar-links">
            <li>
              <a href="/products">Products</a>
            </li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/wiki">Wiki</a></li>
            <li class="selected"><a href="/issues">Issues</a></li>
          </ul>
        </nav>
        <div id="content-wrapper">
          <div id="content">
            <div class="notice">
              <i class="fa fa-info-circle"></i>
              You are viewing an historical archive of past issues. Please
              report new issues to the appropriate project issue tracker on
              <a href="https://github.com/wincent?tab=repositories">GitHub</a>.
            </div>
            <div id="breadcrumbs">
              <a href="/">Home</a> &raquo; <a href="/issues">Issues</a> &raquo;
              Feature request #1270
            </div>
            <div class="issue" id="issue_1270">
              <form
                class="edit_issue"
                id="edit_issue_1270"
                action="/issues/1270"
                accept-charset="UTF-8"
                method="post"
              >
                <input name="utf8" type="hidden" value="&#x2713;" /><input
                  type="hidden"
                  name="_method"
                  value="patch"
                /><input
                  type="hidden"
                  name="authenticity_token"
                  value="lkZUgmBHPqUWtcC0/wGJ5+gfXXhFbIItKKpO4M+zPimitOo1x8rk8M8580POKNpTXZ00RE6ADDEItZse62tZDQ=="
                /><input
                  type="text"
                  name="website_address"
                  id="website_address"
                  value=""
                  class="website-address"
                />
                <h1 class="feature-request major">
                  Feature request #1270:
                  <span data-name="issue[summary]">
                    Always redirect from rails subdomain to typechecked.net
                  </span>
                </h1>
                <table class="issue-metadata">
                  <tr>
                    <th>Kind</th>
                    <td>
                      feature request
                    </td>
                  </tr>
                  <tr>
                    <th>Product</th>
                    <td>
                      typechecked.net
                    </td>
                  </tr>
                  <tr>
                    <th>When</th>
                    <td>
                      Created
                      <time data-relative="true">2009-04-06T11:41:44Z</time>,
                      updated
                      <time data-relative="true">2009-06-26T05:15:39Z</time>
                    </td>
                  </tr>
                  <tr>
                    <th>Status</th>
                    <td>
                      closed
                    </td>
                  </tr>
                  <tr>
                    <th>Reporter</th>
                    <td><a href="/users/greg-hurrell">Greg Hurrell</a></td>
                  </tr>
                  <tr>
                    <th>Tags</th>
                    <td data-name="issue[pending_tags]">
                      no tags
                    </td>
                  </tr>
                </table>

                <h4 class="major">
                  Description
                </h4>
                <div class="issue-description-body">
                  <p>
                    At the moment you can access this site via typechecked.net or
                    thes rails subdomain.
                  </p>
                  <p>
                    typechecked.net is the &quot;official&quot; address, and
                    the rails subdomain is the address I used during development
                    before upgrading the Rails application to
                    &quot;official&quot; status.
                  </p>
                  <p>
                    After moving going live with the app on typechecked.net I
                    allowed the rails links to keep working seeing as there
                    are already a lot of links in Google etc which point to the
                    rails subdomain address.
                  </p>
                  <p>
                    The problem, however, is if someone happens to be hitting
                    the site via the rails subdomain and they hit an uncached
                    page, the page will be cached using the rails subdomain as the
                    address for all absolute links (and most of the links are
                    absolute, not host-relative).
                  </p>
                  <p>
                    From then on, people visiting the site via typechecked.net will
                    see cached content links which take them to
                    the rails subdomain. (The reverse is also true but doesn't
                    matter as much seeing as anyone accessing via
                    the rails subdomain is already on an &quot;unofficial&quot;
                    channel.)
                  </p>
                  <p>
                    The problem here is that cookies are per domain, and if
                    you're logged in via typechecked.net then you won't be logged in
                    via the rails subdomain. I don't want to share cookies across
                    all domains on the site; there are other specific domains
                    such as the staging environment where I explicitly do
                    <em>not</em> want cookies from the main site to be shared.
                  </p>
                  <p>
                    So I am going to set up an automatic redirect at the nginx
                    level. In this way old
                    links from external sites will still work, but I won't have
                    these unwanted rails URLs appearing in the
                    caches.
                  </p>
                </div>
              </form>
            </div>
            <h4 class="major">Comments</h4>
            <ol class="boxed" id="comments">
              <li class="comment admin" id="comment_4411">
                <cite>
                  <a href="/users/greg-hurrell">Greg Hurrell</a>
                  <span class="when"
                    ><a href="#comment_4411"
                      ><time data-relative="true">2009-04-06T11:41:50Z</time></a
                    ></span
                  >
                </cite>
                <blockquote>
                  <p><strong>Status</strong> changed:</p>
                  <ul>
                    <li><strong>From:</strong> New</li>
                    <li><strong>To:</strong> Open</li>
                  </ul>
                </blockquote>
              </li>
              <li class="comment admin" id="comment_4735">
                <cite>
                  <a href="/users/greg-hurrell">Greg Hurrell</a>
                  <span class="when"
                    ><a href="#comment_4735"
                      ><time data-relative="true">2009-06-26T04:59:41Z</time></a
                    ></span
                  >
                </cite>
                <blockquote>
                  <p>
                    See also <a href="/issues/1333">ticket #1333</a>,
                    &quot;Duplicate entries in Atom feeds&quot;, one of the
                    nastier consequences of the dual domain names.
                  </p>
                </blockquote>
              </li>
              <li class="comment admin" id="comment_4736">
                <cite>
                  <a href="/users/greg-hurrell">Greg Hurrell</a>
                  <span class="when"
                    ><a href="#comment_4736"
                      ><time data-relative="true">2009-06-26T05:15:14Z</time></a
                    ></span
                  >
                </cite>
                <blockquote>
                  <p>Ok, this is now done.</p>
                  <p>Will mark as closed.</p>
                </blockquote>
              </li>
              <li class="comment admin" id="comment_4739">
                <cite>
                  <a href="/users/greg-hurrell">Greg Hurrell</a>
                  <span class="when"
                    ><a href="#comment_4739"
                      ><time data-relative="true">2009-06-26T05:15:39Z</time></a
                    ></span
                  >
                </cite>
                <blockquote>
                  <p><strong>Status</strong> changed:</p>
                  <ul>
                    <li><strong>From:</strong> open</li>
                    <li><strong>To:</strong> closed</li>
                  </ul>
                </blockquote>
              </li>
            </ol>
            <h5 class="major">Add a comment</h5>
            <p>Comments are now closed for this issue.</p>
          </div>
        </div>
        <footer class="global">
          <ul>
            <li>
              <a
                title="Email me at greg@hurrell.net"
                class="mailto"
                href="mailto:greg@hurrell.net"
                >contact</a
              >
            </li>
            <li><a href="/misc/legal">legal</a></li>
          </ul>
        </footer>
      </div>
      <div class="menu hide">
        <div class="menu-inner">
          <section>
            <h2>Menu</h2>
            <ul>
              <li><a href="/blog">Blog</a></li>
              <li><a href="/wiki">Wiki</a></li>
              <li><a href="/issues">Issues</a></li>
              <li><a href="/snippets">Snippets</a></li>
            </ul>
          </section>
        </div>
      </div>
    </div>
    <script src="/assets/application-70afe6376892ea318388e4bbb986d5a1.js"></script>

    <script>
      new Wincent.Menu();
    </script>
  </body>
</html>
