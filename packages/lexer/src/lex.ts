import Token from './Token'

const table: any = [
      /* 0 */{"9":1,"10":2,"13":3,"32":1,"33":4,"34":5,"35":6,"36":7,"38":8,"40":9,"41":10,"44":2,"45":11,"46":12,"48":13,"49":14,"50":14,"51":14,"52":14,"53":14,"54":14,"55":14,"56":14,"57":14,"58":15,"61":16,"64":17,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"91":19,"93":20,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":21,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":22,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"123":23,"124":24,"125":25,"65279":2},
      /* 1 */{"9":1,"32":1,"else":-1},
      /* 2 */{"else":-1},
      /* 3 */{"10":2,"else":-1},
      /* 4 */{"else":-2},
      /* 5 */{"9":26,"32":26,"33":26,"34":27,"35":26,"36":26,"37":26,"38":26,"39":26,"40":26,"41":26,"42":26,"43":26,"44":26,"45":26,"46":26,"47":26,"48":26,"49":26,"50":26,"51":26,"52":26,"53":26,"54":26,"55":26,"56":26,"57":26,"58":26,"59":26,"60":26,"61":26,"62":26,"63":26,"64":26,"65":26,"66":26,"67":26,"68":26,"69":26,"70":26,"71":26,"72":26,"73":26,"74":26,"75":26,"76":26,"77":26,"78":26,"79":26,"80":26,"81":26,"82":26,"83":26,"84":26,"85":26,"86":26,"87":26,"88":26,"89":26,"90":26,"91":26,"92":28,"trailer":93,"trailerAction":26},
      /* 6 */{"9":6,"else":-1,"trailer":32,"trailerAction":6},
      /* 7 */{"else":-3},
      /* 8 */{"else":-4},
      /* 9 */{"else":-5},
      /* 10 */{"else":-6},
      /* 11 */{"48":13,"49":14,"50":14,"51":14,"52":14,"53":14,"54":14,"55":14,"56":14,"57":14},
      /* 12 */{"46":29},
      /* 13 */{"46":30,"69":31,"101":31,"else":-7},
      /* 14 */{"46":30,"48":14,"49":14,"50":14,"51":14,"52":14,"53":14,"54":14,"55":14,"56":14,"57":14,"69":31,"101":31,"else":-7},
      /* 15 */{"else":-8},
      /* 16 */{"else":-9},
      /* 17 */{"else":-10},
      /* 18 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 19 */{"else":-12},
      /* 20 */{"else":-13},
      /* 21 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":32,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 22 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":33,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 23 */{"else":-14},
      /* 24 */{"else":-15},
      /* 25 */{"else":-16},
      /* 26 */{"9":26,"32":26,"33":26,"34":34,"35":26,"36":26,"37":26,"38":26,"39":26,"40":26,"41":26,"42":26,"43":26,"44":26,"45":26,"46":26,"47":26,"48":26,"49":26,"50":26,"51":26,"52":26,"53":26,"54":26,"55":26,"56":26,"57":26,"58":26,"59":26,"60":26,"61":26,"62":26,"63":26,"64":26,"65":26,"66":26,"67":26,"68":26,"69":26,"70":26,"71":26,"72":26,"73":26,"74":26,"75":26,"76":26,"77":26,"78":26,"79":26,"80":26,"81":26,"82":26,"83":26,"84":26,"85":26,"86":26,"87":26,"88":26,"89":26,"90":26,"91":26,"92":28,"trailer":93,"trailerAction":26},
      /* 27 */{"34":35,"else":-17},
      /* 28 */{"34":26,"47":26,"92":36,"98":26,"102":26,"110":26,"114":26,"116":26,"117":37},
      /* 29 */{"46":38},
      /* 30 */{"48":39,"49":39,"50":39,"51":39,"52":39,"53":39,"54":39,"55":39,"56":39,"57":39},
      /* 31 */{"43":40,"45":40,"48":41,"49":41,"50":41,"51":41,"52":41,"53":41,"54":41,"55":41,"56":41,"57":41},
      /* 32 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":42,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 33 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-18},
      /* 34 */{"else":-17},
      /* 35 */{"9":35,"10":35,"13":35,"32":35,"33":35,"34":43,"35":35,"36":35,"37":35,"38":35,"39":35,"40":35,"41":35,"42":35,"43":35,"44":35,"45":35,"46":35,"47":35,"48":35,"49":35,"50":35,"51":35,"52":35,"53":35,"54":35,"55":35,"56":35,"57":35,"58":35,"59":35,"60":35,"61":35,"62":35,"63":35,"64":35,"65":35,"66":35,"67":35,"68":35,"69":35,"70":35,"71":35,"72":35,"73":35,"74":35,"75":35,"76":35,"77":35,"78":35,"79":35,"80":35,"81":35,"82":35,"83":35,"84":35,"85":35,"86":35,"87":35,"88":35,"89":35,"90":35,"91":35,"92":44,"trailer":93,"trailerAction":35},
      /* 36 */{"47":26,"92":36,"98":26,"102":26,"110":26,"114":26,"116":26,"117":37},
      /* 37 */{"48":45,"49":45,"50":45,"51":45,"52":45,"53":45,"54":45,"55":45,"56":45,"57":45,"65":45,"66":45,"67":45,"68":45,"69":45,"70":45,"97":45,"98":45,"99":45,"100":45,"101":45,"102":45},
      /* 38 */{"else":-19},
      /* 39 */{"48":39,"49":39,"50":39,"51":39,"52":39,"53":39,"54":39,"55":39,"56":39,"57":39,"69":31,"101":31,"else":-7},
      /* 40 */{"48":41,"49":41,"50":41,"51":41,"52":41,"53":41,"54":41,"55":41,"56":41,"57":41},
      /* 41 */{"48":41,"49":41,"50":41,"51":41,"52":41,"53":41,"54":41,"55":41,"56":41,"57":41,"else":-7},
      /* 42 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":46,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 43 */{"9":35,"10":35,"13":35,"32":35,"33":35,"34":47,"35":35,"36":35,"37":35,"38":35,"39":35,"40":35,"41":35,"42":35,"43":35,"44":35,"45":35,"46":35,"47":35,"48":35,"49":35,"50":35,"51":35,"52":35,"53":35,"54":35,"55":35,"56":35,"57":35,"58":35,"59":35,"60":35,"61":35,"62":35,"63":35,"64":35,"65":35,"66":35,"67":35,"68":35,"69":35,"70":35,"71":35,"72":35,"73":35,"74":35,"75":35,"76":35,"77":35,"78":35,"79":35,"80":35,"81":35,"82":35,"83":35,"84":35,"85":35,"86":35,"87":35,"88":35,"89":35,"90":35,"91":35,"92":44,"trailer":93,"trailerAction":35},
      /* 44 */{"9":35,"10":35,"13":35,"32":35,"33":35,"34":48,"35":35,"36":35,"37":35,"38":35,"39":35,"40":35,"41":35,"42":35,"43":35,"44":35,"45":35,"46":35,"47":35,"48":35,"49":35,"50":35,"51":35,"52":35,"53":35,"54":35,"55":35,"56":35,"57":35,"58":35,"59":35,"60":35,"61":35,"62":35,"63":35,"64":35,"65":35,"66":35,"67":35,"68":35,"69":35,"70":35,"71":35,"72":35,"73":35,"74":35,"75":35,"76":35,"77":35,"78":35,"79":35,"80":35,"81":35,"82":35,"83":35,"84":35,"85":35,"86":35,"87":35,"88":35,"89":35,"90":35,"91":35,"92":44,"trailer":93,"trailerAction":35},
      /* 45 */{"48":49,"49":49,"50":49,"51":49,"52":49,"53":49,"54":49,"55":49,"56":49,"57":49,"65":49,"66":49,"67":49,"68":49,"69":49,"70":49,"97":49,"98":49,"99":49,"100":49,"101":49,"102":49},
      /* 46 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":50,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 47 */{"9":35,"10":35,"13":35,"32":35,"33":35,"34":51,"35":35,"36":35,"37":35,"38":35,"39":35,"40":35,"41":35,"42":35,"43":35,"44":35,"45":35,"46":35,"47":35,"48":35,"49":35,"50":35,"51":35,"52":35,"53":35,"54":35,"55":35,"56":35,"57":35,"58":35,"59":35,"60":35,"61":35,"62":35,"63":35,"64":35,"65":35,"66":35,"67":35,"68":35,"69":35,"70":35,"71":35,"72":35,"73":35,"74":35,"75":35,"76":35,"77":35,"78":35,"79":35,"80":35,"81":35,"82":35,"83":35,"84":35,"85":35,"86":35,"87":35,"88":35,"89":35,"90":35,"91":35,"92":44,"trailer":93,"trailerAction":35},
      /* 48 */{"9":35,"10":35,"13":35,"32":35,"33":35,"34":52,"35":35,"36":35,"37":35,"38":35,"39":35,"40":35,"41":35,"42":35,"43":35,"44":35,"45":35,"46":35,"47":35,"48":35,"49":35,"50":35,"51":35,"52":35,"53":35,"54":35,"55":35,"56":35,"57":35,"58":35,"59":35,"60":35,"61":35,"62":35,"63":35,"64":35,"65":35,"66":35,"67":35,"68":35,"69":35,"70":35,"71":35,"72":35,"73":35,"74":35,"75":35,"76":35,"77":35,"78":35,"79":35,"80":35,"81":35,"82":35,"83":35,"84":35,"85":35,"86":35,"87":35,"88":35,"89":35,"90":35,"91":35,"92":44,"trailer":93,"trailerAction":35},
      /* 49 */{"48":53,"49":53,"50":53,"51":53,"52":53,"53":53,"54":53,"55":53,"56":53,"57":53,"65":53,"66":53,"67":53,"68":53,"69":53,"70":53,"97":53,"98":53,"99":53,"100":53,"101":53,"102":53},
      /* 50 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":54,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 51 */{"else":-20},
      /* 52 */{"10":35,"13":35,"32":35,"33":35,"34":35,"35":35,"36":35,"37":35,"38":35,"39":35,"40":35,"41":35,"42":35,"43":35,"44":35,"45":35,"46":35,"47":35,"48":35,"49":35,"50":35,"51":35,"52":35,"53":35,"54":35,"55":35,"56":35,"57":35,"58":35,"59":35,"60":35,"61":35,"62":35,"63":35,"64":35,"65":35,"66":35,"67":35,"68":35,"69":35,"70":35,"71":35,"72":35,"73":35,"74":35,"75":35,"76":35,"77":35,"78":35,"79":35,"80":35,"81":35,"82":35,"83":35,"84":35,"85":35,"86":35,"87":35,"88":35,"89":35,"90":35,"91":35,"92":44,"trailer":93,"trailerAction":35},
      /* 53 */{"48":26,"49":26,"50":26,"51":26,"52":26,"53":26,"54":26,"55":26,"56":26,"57":26,"65":26,"66":26,"67":26,"68":26,"69":26,"70":26,"97":26,"98":26,"99":26,"100":26,"101":26,"102":26},
      /* 54 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":55,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 55 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":56,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-11},
      /* 56 */{"48":18,"49":18,"50":18,"51":18,"52":18,"53":18,"54":18,"55":18,"56":18,"57":18,"65":18,"66":18,"67":18,"68":18,"69":18,"70":18,"71":18,"72":18,"73":18,"74":18,"75":18,"76":18,"77":18,"78":18,"79":18,"80":18,"81":18,"82":18,"83":18,"84":18,"85":18,"86":18,"87":18,"88":18,"89":18,"90":18,"95":18,"97":18,"98":18,"99":18,"100":18,"101":18,"102":18,"103":18,"104":18,"105":18,"106":18,"107":18,"108":18,"109":18,"110":18,"111":18,"112":18,"113":18,"114":18,"115":18,"116":18,"117":18,"118":18,"119":18,"120":18,"121":18,"122":18,"else":-21}];

const tokens = ["IGNORED","BANG","DOLLAR","AMPERSAND","OPENING_PAREN","CLOSING_PAREN","NUMBER","COLON","EQUALS","AT","NAME","OPENING_BRACKET","CLOSING_BRACKET","OPENING_BRACE","BAR","CLOSING_BRACE","STRING_VALUE","ON","ELLIPSIS","BLOCK_STRING_VALUE","FRAGMENT"];

export default function *lex(input: string) {
  const START = 0;
  let state = START;
  let tokenStart = 0;
  let i = tokenStart;
  while (i < input.length) {
    const ch = input.charCodeAt(i);
    const actions = table[state];
    let isElse = false;
    const action = actions[ch] ??
      (actions.trailer && ch >= actions.trailer ? actions.trailerAction : null) ??
      (isElse = true, actions.else);
    if (action != null) {
      if (action < 0) {
        const t = tokens[-action - 1];
        if (t === 'IGNORED') {
          tokenStart = i;
          state = START;
          continue;
        } else {
          state = START;
          if (isElse) {
            yield new Token(t, tokenStart, i, input);
            tokenStart = i;
            continue;
          } else {
            yield new Token(t, tokenStart, i + 1, input);
            tokenStart = i + 1;
          }
        }
      } else {
        state = action;
      }
    } else {
      throw new Error('No action');
    }
    i++;
  }
}
